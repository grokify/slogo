- apiVersion: openslo/v1
  kind: SLO
  metadata:
    displayName: CPU Utilization
    labels:
      audience:
      - sre
      category:
      - resource
      framework:
      - use
      layer:
      - infrastructure
      metric-type:
      - utilization
      resource-type:
      - cpu
      scope:
      - internal
      severity:
      - high
      tier:
      - p1
    name: cpu-utilization
  spec:
    budgetingMethod: Occurrences
    description: Monitor CPU utilization to ensure resources are not over-utilized
    indicator:
      metadata:
        displayName: CPU usage percentage
        name: cpu-usage
      spec:
        thresholdMetric:
          metricSource:
            spec:
              query: avg(rate(node_cpu_seconds_total{mode!="idle"}[5m])) * 100
            type: Prometheus
    objectives:
    - displayName: Healthy CPU utilization
      op: lt
      target: 0.99
      value: 80
    service: backend-service
    timeWindow:
    - duration: 1w
      isRolling: true
- apiVersion: openslo/v1
  kind: SLO
  metadata:
    displayName: Memory Utilization
    labels:
      audience:
      - sre
      category:
      - resource
      framework:
      - use
      layer:
      - infrastructure
      metric-type:
      - utilization
      resource-type:
      - memory
      scope:
      - internal
      severity:
      - high
      tier:
      - p0
    name: memory-utilization
  spec:
    budgetingMethod: Occurrences
    description: Monitor memory utilization to prevent out-of-memory conditions
    indicator:
      metadata:
        displayName: Memory usage percentage
        name: memory-usage
      spec:
        thresholdMetric:
          metricSource:
            spec:
              query: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes))
                * 100
            type: Prometheus
    objectives:
    - displayName: Healthy memory utilization
      op: lt
      target: 0.99
      value: 85
    service: backend-service
    timeWindow:
    - duration: 1w
      isRolling: true
- apiVersion: openslo/v1
  kind: SLO
  metadata:
    displayName: Disk Utilization
    labels:
      audience:
      - sre
      category:
      - resource
      framework:
      - use
      layer:
      - infrastructure
      metric-type:
      - utilization
      resource-type:
      - disk
      scope:
      - internal
      severity:
      - medium
      tier:
      - p1
    name: disk-utilization
  spec:
    budgetingMethod: Occurrences
    description: Monitor disk space utilization to prevent storage exhaustion
    indicator:
      metadata:
        displayName: Disk usage percentage
        name: disk-usage
      spec:
        thresholdMetric:
          metricSource:
            spec:
              query: (1 - (node_filesystem_avail_bytes{mountpoint="/"} / node_filesystem_size_bytes{mountpoint="/"}))
                * 100
            type: Prometheus
    objectives:
    - displayName: Healthy disk utilization
      op: lt
      target: 0.99
      value: 75
    service: backend-service
    timeWindow:
    - duration: 2w
      isRolling: true
