- apiVersion: openslo/v1
  kind: SLO
  metadata:
    displayName: API Error Rate
    labels:
      audience:
      - sre
      category:
      - quality
      framework:
      - red
      layer:
      - service
      metric-type:
      - errors
      scope:
      - customer-facing
      severity:
      - critical
      tier:
      - p0
    name: api-error-rate
  spec:
    budgetingMethod: Timeslices
    description: Track error rate to ensure service reliability - successful responses
      (2xx, 3xx) vs errors (4xx, 5xx)
    indicator:
      metadata:
        displayName: Percentage of successful requests
        name: error-rate
      spec:
        ratioMetric:
          counter: false
          good:
            metricSource:
              spec:
                query: sum(rate(http_requests_total{status=~"2..|3.."}[5m]))
              type: Prometheus
          total:
            metricSource:
              spec:
                query: sum(rate(http_requests_total[5m]))
              type: Prometheus
    objectives:
    - displayName: High reliability
      target: 0.999
      timeSliceTarget: 0.95
      timeSliceWindow: 5m
    - displayName: Acceptable reliability
      target: 0.99
      timeSliceTarget: 0.9
      timeSliceWindow: 5m
    service: api-service
    timeWindow:
    - duration: 4w
      isRolling: true
